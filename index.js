(function(){"use strict";const e=window.Vue;function u(){return window.panel}function k(){return u().api}const v=()=>window.panel.plugins.viewButtons!==void 0;function g(){return v()?new Proxy({},{get(){throw new Error("Vuex store is not available. Are you using Kirby 5? Use the `useContent` composable instead.")}}):u().app.$store}function w(){const s=u(),t=g(),n=v();if(n&&!("diff"in s.content))throw new Error("This plugin requires Kirby 5.0.0-rc.1 or higher. Please update your Kirby installation.");const r=i(n?()=>s.content.version("changes"):()=>t.getters["content/values"]()),l=i(n?()=>s.content.diff():()=>t.getters["content/changes"]()),a=i(n?()=>s.content.hasDiff():()=>t.getters["content/hasChanges"]()),p=n?s.content:new Proxy({},{get(){return()=>{}}});return{content:p,currentContent:r,contentChanges:l,hasChanges:a,update:async(o,f=!0)=>{if(!n&&o)for(const[S,R]of Object.entries(o))t.dispatch("content/update",[S,R]);const c=p.merge(o);f&&await p.save(c)}}}const i=e.computed;e.customRef,e.defineAsyncComponent,e.defineComponent,e.effectScope,e.getCurrentInstance,e.getCurrentScope,e.h,e.inject,e.isProxy,e.isReactive,e.isReadonly,e.isRef,e.isShallow,e.markRaw,e.nextTick,e.onActivated,e.onBeforeMount,e.onBeforeUnmount,e.onBeforeUpdate,e.onDeactivated,e.onErrorCaptured,e.onMounted,e.onRenderTracked,e.onRenderTriggered,e.onScopeDispose,e.onServerPrefetch,e.onUnmounted,e.onUpdated,e.provide,e.proxyRefs,e.reactive,e.readonly;const m=e.ref;e.shallowReactive,e.shallowReadonly,e.shallowRef,e.toRaw,e.toRef,e.toRefs,e.triggerRef,e.unref,e.useAttrs,e.useCssModule,e.useCssVars,e.useListeners,e.useSlots,e.watch,e.watchEffect,e.watchPostEffect,e.watchSyncEffect;function h(s,t,n,r,l,a,p,d){var o=typeof s=="function"?s.options:s;return t&&(o.render=t,o.staticRenderFns=n,o._compiled=!0),o._scopeId="data-v-"+a,{exports:s,options:o}}const C={__name:"SerpPreview",props:{label:String,faviconUrl:String,siteTitle:String,siteUrl:String,titleSeparator:String,titleContentKey:String,width:String,defaultTitle:String,descriptionContentKey:String,defaultDescription:String,searchConsoleUrl:String,config:Object,metaImage:[String,Object]},setup(s){const t=s,n=u(),r=k(),l=m("");Vue.onMounted(async()=>{const c=await r.get(n.view.path,{select:"previewUrl"});l.value=c.previewUrl});const{currentContent:a}=w(),p=i(()=>l.value?new URL(l.value).pathname:""),d=i(()=>{let c=n.view.props.blueprint;return a.value[t.titleContentKey]?c==="home"||c==="site"?[t.siteTitle,t.titleSeparator,a.value[t.titleContentKey]].join(" "):[a.value[t.titleContentKey],t.titleSeparator,t.siteTitle].join(" "):t.defaultTitle||[n.view.title,t.titleSeparator,t.siteTitle].join(" ")}),o=i(()=>a.value[t.descriptionContentKey]?a.value[t.descriptionContentKey]:t.defaultDescription),f=i(()=>t.metaImage);return{__sfc:!0,panel:n,api:r,props:t,previewUrl:l,currentContent:a,path:p,title:d,description:o,image:f}}};var _=function(){var t=this,n=t._self._c,r=t._self._setupProxy;return n("k-field",{staticClass:"k-serp-section",attrs:{label:t.label}},[n("div",{staticClass:"ksp-overflow-hidden ksp-rounded-[var(--input-rounded)] ksp-bg-[var(--input-color-back)] ksp-p-4"},[n("div",{staticClass:"ksp-mb-2 ksp-flex ksp-items-center ksp-gap-3"},[t.faviconUrl?n("figure",{staticClass:"ksp-inline-flex ksp-aspect-square ksp-h-[26px] ksp-w-[26px] ksp-items-center ksp-justify-center ksp-rounded-full ksp-border ksp-border-solid ksp-border-[var(--serp-favicon-border)] ksp-bg-[var(--serp-favicon-background)]"},[n("img",{staticClass:"ksp-block ksp-h-[18px] ksp-w-[18px]",attrs:{src:t.faviconUrl,alt:""}})]):t._e(),n("div",{staticClass:"ksp-flex ksp-flex-col"},[n("span",{staticClass:"ksp-text-sm ksp-text-[var(--serp-color-text)]"},[t._v(t._s(t.siteTitle))]),n("span",{staticClass:"ksp-line-clamp-1 ksp-text-xs ksp-text-[var(--serp-color-text)]"},[t._v(t._s(t.siteUrl)+t._s(r.path))])])]),n("h3",{staticClass:"ksp-line-clamp-1 ksp-text-xl ksp-text-[var(--serp-color-title)]"},[t._v(" "+t._s(r.title)+" ")]),n("p",{directives:[{name:"show",rawName:"v-show",value:r.description,expression:"description"}],staticClass:"ksp-mt-1 ksp-line-clamp-2 ksp-text-sm ksp-text-[var(--serp-color-text)]"},[t._v(" "+t._s(r.description)+" ")]),r.image?n("div",{staticClass:"ksp-mt-3"},[n("img",{attrs:{src:r.image,alt:""}})]):t._e()]),n("k-button-group",{directives:[{name:"show",rawName:"v-show",value:t.searchConsoleUrl,expression:"searchConsoleUrl"}],staticClass:"ksp-mt-2 ksp-w-full"},[n("k-button",{attrs:{link:t.searchConsoleUrl,icon:"open",target:"_blank"}},[t._v(" Google Search Console ")])],1)],1)},y=[],x=h(C,_,y,!1,null,"862f30c4");const b=x.exports;window.panel.plugin("smallsystems/vuek-seo",{fields:{"seo-preview":b}})})();
